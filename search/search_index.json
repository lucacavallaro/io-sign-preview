{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Manuale operativo Introduzione Fase di sperimentazione Questo manuale riguarda le API di Firma con IO per la fase di sperimentazione, le informazioni contenute sono soggette a cambiamenti prima del lancio ufficiale. Questo manuale si rivolge agli enti pubblici e privati che intendono integrare il servizio Firma con IO per richiedere la firma di documenti e contratti ai cittadini tramite app IO . Il documento vuole: Chiarire le modalit\u00e0 di integrazione Illustrare le risorse principali] Spiegare come richiedere una firma Modalit\u00e0 di integrazione Firma con IO espone delle API REST che Sono composte da endpoint con URL previdibili basati sulle risorse Utilizzano JSON come formato di interscambio, sia per le richieste che per le risposte HTTP Fanno uso di verbs e response codes standard di HTTP Utilizzano Problem Details (RFC7807) per descrivere gli errori Sono documentate secondo specifica OpenAPI Autenticazione Le API di Firma con IO fanno uso di un API Key per l'autenticazione delle richieste. L' API Key , per la fase di sperimentazione, viene trasmessa cifrata ai canali indicati da ciascun ente. Per decifrare la chiave \u00e8 necessario avere openssl installato ed eseguire il seguente comando, dando in input la chiave cifrata e il secret trasmesso da PagoPA. echo \"<API_KEY_HERE>\" | openssl aes-256-cbc -a -d -pbkdf2 -salt Info I dettagli implementativi riguardanti l'autenticazione, come ad esempio gli header da includere in ogni richiesta sono documenti nella specifica OpenAPI Risorse Il processo di firma coinvolge le seguenti risorse: Document Il documento da firmare, compreso di metadati (titolo, clausole da firmare). Product Il fascicolo che contiene l'insieme dei metadati dei Document da firmare all'interno di una transazione. Signature Request La richiesta di firma che viene inoltrata ad un cittadino. \u00c8 la risorsa che tiene traccia dell'intero ciclo di vita del processo di firma. Contiene uno status , i timestamp di ogni evento e la lista dei documenti allegati (aggiornati secondo ciascuna fase). Viene creata a partire da un Product . Richiedere una firma Info \u00c8 consigliata la lettura di questa sezione dopo la visione della specifica OpenAPI Overview Il processo di richiesta della firma di documenti da parte del cittadino \u00e8 composto dai seguenti passaggi: Creazione di un Product (solo la prima volta, per ogni tipologia di richiesta di firma) Creazione della Signature Request , che associa il cittadino (identificato tramite codice fiscale) ad uno specifico Product , scegliendo una specifica modalit\u00e0 di inoltro ( Messaggio su IO o QRCode ) Upload dei documenti in formato PDF da far firmare Conferma dell'invio della richiesta di firma sequenceDiagram autonumber participant Ente participant Firma con IO participant Document Storage Ente ->> Firma con IO: Verifica se il cittadino pu\u00f2 ricevere una richiesta di firma Firma con IO -->> Ente: Restituisce lo stato di iscrizione al servizio del cittadino Ente ->> Firma con IO: Crea un \"Product\" con i metadati dei documenti da firmare Firma con IO -->> Ente: Restituisce \"Product\" creato Ente ->> Firma con IO: Crea una nuova \"Signature Request\", specificando la modalit\u00e0 di inoltro Firma con IO -->> Ente: Restituisce \"Signature Request\" creata loop Per ogni documento da firmare Ente ->> Firma con IO: Richiede un \"Upload URL\" per effettuare upload del PDF da firmare Firma con IO -->> Ente: Restituisce \"Upload URL\" Ente ->> Document Storage: Efettua l'upload del documento da firmare Document Storage -->> Ente: Notifica l'avvenuto upload end Ente ->> Firma con IO: Marca la richiesta come completata e pronta per essere inoltrata al cittadino Firma con IO -->> Ente: Notifica l'avvenuta presa in carico della richiesta di firma Upload di un documento Una volta creata con successo una Signature Request , tramite REST API , prima di inoltrarla al cittadino \u00e8 necessario effettuare l'upload dei documenti PDF da far firmare. L'upload dei file non viene effettuato direttamente sul Resource Server che espone le API di Firma con IO, ma su un Document Storage dedicato, basato su Azure BLOB Storage . Per ciascun documento da far firmare, \u00e8 necessario: Ottenere un Upload URL , specifico per il documento, dall'endpoint REST dedicato ( /api/v1/sign/signature-requests/{sr_id}/documents/{doc_id}/upload-url) ) Effettuare l'upload verso Upload URL utilizzando l'SDK di Azure Storage del linguaggio di programmazione di riferimento. Upload URL ha una validit\u00e0 di 15 minuti, \u00e8 legato ad uno specifico documento da caricare (non pu\u00f2 essere utilizzato per pi\u00f9 di un documento) e contiene tutte le informazioni necessarie all'autenticazione verso il Document Storage . Conferma dell'invio della richiesta di firma Una volta caricati tutti i documenti nel Document Storage \u00e8 necessario pubblicare la richiesta di firma. Per pubblicare la Signature Request \u00e8 necessario effettuare una richiesta HTTP PUT al seguente endpoint {{BASE-URL}}/api/v1/sign//signature-requests/{signatureRequestId}/status Specificando, nel corpo della richiesta, lo stato WAIT_FOR_SIGNATURE Verificare lo stato di una richiesta di firma Per verificare lo stato di una richiesta di firma, \u00e8 necessario effettuare una richiesta HTTP GET all'endpoint che restitusce il dettaglio della Signature Request (specificando l' ID della richiesta di firma e gli header necessari all'autenticazione) {{BASE-URL}}/api/v1/sign/signature-requests/{id} La risorsa restituita, contiene la propriet\u00e0 status che pu\u00f2 contenere i seguenti valori: DRAFT - la richiesta di firma \u00e8 stata creata, ma non \u00e8 ancora stata finalizzata (\u00e8 necessario caricare documenti o marcarla esplicitamente come 'finalizzata') WAIT_FOR_SIGNATURE - la richiesta di firma \u00e8 stata inoltrata ed \u00e8 in attesa della firma da parte del cittadino SIGNED - tutti i documeni contenuti nella richiesta di firma sono stati firmati","title":"Manuale operativo"},{"location":"#manuale-operativo","text":"","title":"Manuale operativo"},{"location":"#introduzione","text":"Fase di sperimentazione Questo manuale riguarda le API di Firma con IO per la fase di sperimentazione, le informazioni contenute sono soggette a cambiamenti prima del lancio ufficiale. Questo manuale si rivolge agli enti pubblici e privati che intendono integrare il servizio Firma con IO per richiedere la firma di documenti e contratti ai cittadini tramite app IO . Il documento vuole: Chiarire le modalit\u00e0 di integrazione Illustrare le risorse principali] Spiegare come richiedere una firma","title":"Introduzione"},{"location":"#modalita-di-integrazione","text":"Firma con IO espone delle API REST che Sono composte da endpoint con URL previdibili basati sulle risorse Utilizzano JSON come formato di interscambio, sia per le richieste che per le risposte HTTP Fanno uso di verbs e response codes standard di HTTP Utilizzano Problem Details (RFC7807) per descrivere gli errori Sono documentate secondo specifica OpenAPI","title":"Modalit\u00e0 di integrazione"},{"location":"#autenticazione","text":"Le API di Firma con IO fanno uso di un API Key per l'autenticazione delle richieste. L' API Key , per la fase di sperimentazione, viene trasmessa cifrata ai canali indicati da ciascun ente. Per decifrare la chiave \u00e8 necessario avere openssl installato ed eseguire il seguente comando, dando in input la chiave cifrata e il secret trasmesso da PagoPA. echo \"<API_KEY_HERE>\" | openssl aes-256-cbc -a -d -pbkdf2 -salt Info I dettagli implementativi riguardanti l'autenticazione, come ad esempio gli header da includere in ogni richiesta sono documenti nella specifica OpenAPI","title":"Autenticazione"},{"location":"#risorse","text":"Il processo di firma coinvolge le seguenti risorse:","title":"Risorse"},{"location":"#document","text":"Il documento da firmare, compreso di metadati (titolo, clausole da firmare).","title":"Document"},{"location":"#product","text":"Il fascicolo che contiene l'insieme dei metadati dei Document da firmare all'interno di una transazione.","title":"Product"},{"location":"#signature-request","text":"La richiesta di firma che viene inoltrata ad un cittadino. \u00c8 la risorsa che tiene traccia dell'intero ciclo di vita del processo di firma. Contiene uno status , i timestamp di ogni evento e la lista dei documenti allegati (aggiornati secondo ciascuna fase). Viene creata a partire da un Product .","title":"Signature Request"},{"location":"#richiedere-una-firma","text":"Info \u00c8 consigliata la lettura di questa sezione dopo la visione della specifica OpenAPI","title":"Richiedere una firma"},{"location":"#overview","text":"Il processo di richiesta della firma di documenti da parte del cittadino \u00e8 composto dai seguenti passaggi: Creazione di un Product (solo la prima volta, per ogni tipologia di richiesta di firma) Creazione della Signature Request , che associa il cittadino (identificato tramite codice fiscale) ad uno specifico Product , scegliendo una specifica modalit\u00e0 di inoltro ( Messaggio su IO o QRCode ) Upload dei documenti in formato PDF da far firmare Conferma dell'invio della richiesta di firma sequenceDiagram autonumber participant Ente participant Firma con IO participant Document Storage Ente ->> Firma con IO: Verifica se il cittadino pu\u00f2 ricevere una richiesta di firma Firma con IO -->> Ente: Restituisce lo stato di iscrizione al servizio del cittadino Ente ->> Firma con IO: Crea un \"Product\" con i metadati dei documenti da firmare Firma con IO -->> Ente: Restituisce \"Product\" creato Ente ->> Firma con IO: Crea una nuova \"Signature Request\", specificando la modalit\u00e0 di inoltro Firma con IO -->> Ente: Restituisce \"Signature Request\" creata loop Per ogni documento da firmare Ente ->> Firma con IO: Richiede un \"Upload URL\" per effettuare upload del PDF da firmare Firma con IO -->> Ente: Restituisce \"Upload URL\" Ente ->> Document Storage: Efettua l'upload del documento da firmare Document Storage -->> Ente: Notifica l'avvenuto upload end Ente ->> Firma con IO: Marca la richiesta come completata e pronta per essere inoltrata al cittadino Firma con IO -->> Ente: Notifica l'avvenuta presa in carico della richiesta di firma","title":"Overview"},{"location":"#upload-di-un-documento","text":"Una volta creata con successo una Signature Request , tramite REST API , prima di inoltrarla al cittadino \u00e8 necessario effettuare l'upload dei documenti PDF da far firmare. L'upload dei file non viene effettuato direttamente sul Resource Server che espone le API di Firma con IO, ma su un Document Storage dedicato, basato su Azure BLOB Storage . Per ciascun documento da far firmare, \u00e8 necessario: Ottenere un Upload URL , specifico per il documento, dall'endpoint REST dedicato ( /api/v1/sign/signature-requests/{sr_id}/documents/{doc_id}/upload-url) ) Effettuare l'upload verso Upload URL utilizzando l'SDK di Azure Storage del linguaggio di programmazione di riferimento. Upload URL ha una validit\u00e0 di 15 minuti, \u00e8 legato ad uno specifico documento da caricare (non pu\u00f2 essere utilizzato per pi\u00f9 di un documento) e contiene tutte le informazioni necessarie all'autenticazione verso il Document Storage .","title":"Upload di un documento"},{"location":"#conferma-dellinvio-della-richiesta-di-firma","text":"Una volta caricati tutti i documenti nel Document Storage \u00e8 necessario pubblicare la richiesta di firma. Per pubblicare la Signature Request \u00e8 necessario effettuare una richiesta HTTP PUT al seguente endpoint {{BASE-URL}}/api/v1/sign//signature-requests/{signatureRequestId}/status Specificando, nel corpo della richiesta, lo stato WAIT_FOR_SIGNATURE","title":"Conferma dell'invio della richiesta di firma"},{"location":"#verificare-lo-stato-di-una-richiesta-di-firma","text":"Per verificare lo stato di una richiesta di firma, \u00e8 necessario effettuare una richiesta HTTP GET all'endpoint che restitusce il dettaglio della Signature Request (specificando l' ID della richiesta di firma e gli header necessari all'autenticazione) {{BASE-URL}}/api/v1/sign/signature-requests/{id} La risorsa restituita, contiene la propriet\u00e0 status che pu\u00f2 contenere i seguenti valori: DRAFT - la richiesta di firma \u00e8 stata creata, ma non \u00e8 ancora stata finalizzata (\u00e8 necessario caricare documenti o marcarla esplicitamente come 'finalizzata') WAIT_FOR_SIGNATURE - la richiesta di firma \u00e8 stata inoltrata ed \u00e8 in attesa della firma da parte del cittadino SIGNED - tutti i documeni contenuti nella richiesta di firma sono stati firmati","title":"Verificare lo stato di una richiesta di firma"},{"location":"openapi-spec/","text":"Specifica OpenAPI","title":"Specifica OpenAPI"},{"location":"openapi-spec/#specifica-openapi","text":"","title":"Specifica OpenAPI"}]}